<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextGen Appliances - E-commerce Demo</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7; /* Light background for the whole page */
        }
        /* Custom transitions for the category items */
        .category-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(30, 64, 175, 0.2), 0 4px 6px -2px rgba(30, 64, 175, 0.1);
        }
        .banner-item {
            transition: opacity 1s ease-in-out;
        }
    </style>
</head>
<body>

    <!-- Header / Navbar -->
    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-3xl font-extrabold text-blue-800">NextGen Home</h1>
            <nav class="hidden md:flex space-x-8 text-gray-600">
                <a href="#" class="hover:text-blue-600 transition duration-150">Home</a>
                <a href="#categories" class="hover:text-blue-600 transition duration-150">Shop Categories</a>
                <a href="#about" class="hover:text-blue-600 transition duration-150">Our Story</a>
                <a href="#" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-150 shadow-md">Login</a>
            </nav>
        </div>
    </header>

    <!-- Full-Width Auto-Changing Banner -->
    <section class="w-full relative h-96 overflow-hidden">
        <div id="banner-container" class="h-full">
            <!-- Banner Item 1 -->
            <div class="banner-item absolute inset-0 bg-cover bg-center opacity-100" style="background-image: url('https://placehold.co/1920x400/1e40af/ffffff?text=Smart+Living+Starts+Here');">
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                    <div class="text-center p-8">
                        <h2 class="text-5xl font-extrabold text-white mb-4">The Future of Home Appliances</h2>
                        <p class="text-xl text-blue-100">Explore our range of energy-efficient and connected devices.</p>
                        <button class="mt-6 bg-yellow-400 text-blue-900 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-yellow-500 transition duration-300">Shop Now</button>
                    </div>
                </div>
            </div>
            <!-- Banner Item 2 (Starts hidden) -->
            <div class="banner-item absolute inset-0 bg-cover bg-center opacity-0" style="background-image: url('https://placehold.co/1920x400/059669/ffffff?text=Unbeatable+Performance');">
                <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center">
                    <div class="text-center p-8">
                        <h2 class="text-5xl font-extrabold text-white mb-4">Unbeatable Performance, Zero Compromise</h2>
                        <p class="text-xl text-green-100">Washing machines, refrigerators, and more, built to last.</p>
                        <button class="mt-6 bg-yellow-400 text-blue-900 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-yellow-500 transition duration-300">View Deals</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Introductory Content Section -->
    <section id="about" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-4xl font-bold text-gray-800 mb-4">Why Choose NextGen?</h2>
            <p class="text-xl text-gray-500 mb-12 max-w-3xl mx-auto">We provide the latest in smart technology, exceptional warranties, and customer support you can trust. Upgrade your home today.</p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-6 bg-blue-50 rounded-xl shadow-lg transition duration-300 hover:shadow-xl">
                    <div class="text-4xl text-blue-600 mb-3">‚ö°Ô∏è</div>
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">Energy Efficiency</h3>
                    <p class="text-gray-500">Save on your bills with our 5-star rated appliances. Good for your wallet, great for the planet.</p>
                </div>
                <div class="p-6 bg-blue-50 rounded-xl shadow-lg transition duration-300 hover:shadow-xl">
                    <div class="text-4xl text-blue-600 mb-3">üì°</div>
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">Smart Connectivity</h3>
                    <p class="text-gray-500">Control and monitor all your devices right from your smartphone, anywhere in the world.</p>
                </div>
                <div class="p-6 bg-blue-50 rounded-xl shadow-lg transition duration-300 hover:shadow-xl">
                    <div class="text-4xl text-blue-600 mb-3">üõ°Ô∏è</div>
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">Premium Warranty</h3>
                    <p class="text-gray-500">Enjoy peace of mind with our industry-leading 10-year compressor and motor guarantees.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Category Explorer Section -->
    <section id="categories" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Find Your Perfect Appliance</h2>

            <!-- Breadcrumb Navigation -->
            <div class="mb-6">
                <ol id="breadcrumb" class="flex flex-wrap items-center text-sm text-gray-500">
                    <li class="flex items-center">
                        <span class="font-medium text-blue-600 cursor-pointer hover:underline" onclick="navigateToLevel(0)">Home</span>
                    </li>
                </ol>
            </div>

            <!-- Dynamic Category List -->
            <div id="category-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Categories will be rendered here by JavaScript -->
            </div>

        </div>
    </section>

    <!-- Contact Modal (Hidden by default) -->
    <div id="contact-modal" class="fixed inset-0 z-50 bg-black bg-opacity-60 hidden transition duration-300" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div id="modal-content" class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-lg transform transition-all duration-300 scale-95 opacity-0">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-2xl font-bold text-blue-700" id="modal-title">Inquire About <span id="final-selection-name" class="text-blue-500">Product</span></h3>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 transition">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>

                <p class="text-sm text-gray-500 mb-6">Tell us your details and we'll have a specialist contact you shortly with personalized options and pricing.</p>

                <form id="contact-form" onsubmit="handleFormSubmit(event)">
                    <div class="space-y-4">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                            <input type="text" id="name" name="name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                            <input type="email" id="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                        </div>
                    </div>

                    <div id="submission-message" class="mt-4 text-center p-3 rounded-lg text-white font-medium hidden"></div>

                    <div class="mt-6 flex justify-end">
                        <button type="button" onclick="closeModal()" class="bg-gray-200 text-gray-700 py-2 px-4 rounded-lg mr-3 hover:bg-gray-300 transition duration-150">Cancel</button>
                        <button type="submit" id="submit-button" class="bg-blue-600 text-white py-2 px-6 rounded-lg font-semibold hover:bg-blue-700 transition duration-150 shadow-md">Submit Inquiry</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2024 NextGen Home Appliances. All rights reserved.</p>
            <div class="flex justify-center space-x-4 mt-3 text-sm text-gray-400">
                <a href="#" class="hover:text-blue-400">Privacy Policy</a>
                <a href="#" class="hover:text-blue-400">Terms of Service</a>
            </div>
        </div>
    </footer>

    <script>
        // Global Data and State
        const categories = [
            // Level 1: Main Category
            { name: "Air Conditioners", image: "https://placehold.co/400x300/1e40af/ffffff?text=Cool+Air", id: "AC", children: [
                // Level 2: Type
                { name: "Inverter ACs", id: "INV", children: [
                    // Level 3: Capacity
                    { name: "1.5 Ton", id: "1.5T", children: [
                        // Level 4: Feature
                        { name: "5-Star Rating", id: "5S", children: [
                            // Level 5: Final Option (isFinal: true)
                            { name: "Smart Wi-Fi Connect", isFinal: true, id: "WIFI" },
                            { name: "Self-Clean Technology", isFinal: true, id: "SC" }
                        ]}
                    ]},
                    { name: "1.0 Ton", id: "1.0T", children: [
                        { name: "3-Star Rating", id: "3S", children: [
                            { name: "Standard Model", isFinal: true, id: "STD" }
                        ]}
                    ]}
                ]},
                { name: "Non-Inverter ACs", id: "NONINV", children: [
                    { name: "Window Units", id: "WIN", children: [
                        { name: "0.8 Ton", id: "0.8T", children: [
                            { name: "Basic Cooling", isFinal: true, id: "BAS" }
                        ]}
                    ]}
                ]}
            ]},
            // Level 1: Main Category
            { name: "Televisions", image: "https://placehold.co/400x300/c026d3/ffffff?text=Entertainment", id: "TV", children: [
                // Level 2: Screen Type
                { name: "QLED Smart TVs", id: "QLED", children: [
                    // Level 3: Size
                    { name: "65-Inch", id: "65IN", children: [
                        // Level 4: Resolution
                        { name: "8K UHD", id: "8KUHD", children: [
                            // Level 5: Final Option
                            { name: "Cinematic Soundbar Incl.", isFinal: true, id: "CIN" },
                            { name: "Built-in Voice Assistant", isFinal: true, id: "VA"}
                        ]}
                    ]}
                ]},
                { name: "OLED Smart TVs", id: "OLED", children: [
                    { name: "55-Inch", id: "55IN", children: [
                        { name: "4K UHD", id: "4KUHD", children: [
                            { name: "Gaming Optimized (120Hz)", isFinal: true, id: "GOPT" }
                        ]}
                    ]}
                ]}
            ]},
            // Level 1: Main Category
            { name: "Washing Machines", image: "https://placehold.co/400x300/059669/ffffff?text=Clean+Laundry", id: "WM", children: [
                { name: "Front Load", id: "FL", children: [
                    { name: "10 Kg Capacity", id: "10KG", children: [
                        { name: "Steam Wash", id: "SW", children: [
                            { name: "IoT Enabled", isFinal: true, id: "IOT" },
                            { name: "Anti-Allergy Cycle", isFinal: true, id: "AAC" }
                        ]}
                    ]}
                ]},
                { name: "Top Load", id: "TL", children: [
                    { name: "8 Kg Capacity", id: "8KG", children: [
                        { name: "Quick Wash", id: "QW", children: [
                            { name: "Hard Water Treatment", isFinal: true, id: "HWT" }
                        ]}
                    ]}
                ]}
            ]}
        ];

        // State to track current navigation path
        let currentPath = [];
        let finalProductId = null;

        /**
         * Finds the current set of children based on the currentPath state.
         * @returns {Array} The array of categories to display.
         */
        function getCurrentCategories() {
            let current = categories;
            for (const pathId of currentPath) {
                const parent = current.find(c => c.id === pathId);
                if (!parent || !parent.children) return [];
                current = parent.children;
            }
            return current;
        }

        /**
         * Renders the category list based on the current path.
         * @param {Array} list - The list of categories to render.
         */
        function renderCategories(list) {
            const container = document.getElementById('category-list');
            container.innerHTML = '';
            
            // Check if we are at Level 5+ and the current list only contains final options
            const currentLevel = currentPath.length;
            const titleElement = document.querySelector('#categories h2');
            
            let titleText = "Choose a Product Category";
            if (currentLevel === 1) titleText = "Select Type";
            if (currentLevel === 2) titleText = "Select Capacity/Size";
            if (currentLevel === 3) titleText = "Select Key Feature";
            if (currentLevel >= 4) titleText = "Final Selection - Choose an Option";
            
            titleElement.textContent = titleText;


            if (list.length === 0) {
                // If the list is empty, something is wrong, go back to the start.
                navigateToLevel(0);
                return;
            }

            list.forEach(category => {
                const isFinal = category.isFinal;
                const image = category.image || `https://placehold.co/400x300/3b82f6/ffffff?text=Level+${currentPath.length + 1}`;
                const actionClass = isFinal ? 'bg-blue-600 text-white hover:bg-blue-700' : 'bg-blue-50 text-blue-700 hover:bg-blue-100';
                const buttonText = isFinal ? 'Inquire Now' : 'Explore Sub-Categories';

                // Render image only for Level 1 categories
                const imageHtml = currentPath.length === 0 ? 
                    `<img src="${image}" onerror="this.src='https://placehold.co/400x300/3b82f6/ffffff?text=Image+Missing'" alt="${category.name}" class="w-full h-48 object-cover rounded-t-xl transition duration-500 group-hover:opacity-90">` : '';

                const cardHtml = `
                    <div class="category-card group bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100">
                        ${imageHtml}
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-3 ${isFinal ? 'text-red-600' : 'text-gray-800'}">${category.name}</h3>
                            <p class="text-sm text-gray-500 mb-4">${isFinal ? 'This is a final product configuration. Click to inquire.' : `(${category.children ? category.children.length : 0} options available)`}</p>
                            
                            <button 
                                onclick="handleCategoryClick('${category.id}', ${isFinal})" 
                                class="w-full py-3 px-4 rounded-lg font-bold ${actionClass} transition duration-300">
                                ${buttonText}
                            </button>
                        </div>
                    </div>
                `;
                container.innerHTML += cardHtml;
            });
            updateBreadcrumb();
        }

        /**
         * Updates the breadcrumb trail based on the currentPath state.
         */
        function updateBreadcrumb() {
            const breadcrumb = document.getElementById('breadcrumb');
            let html = `
                <li class="flex items-center">
                    <span class="font-medium text-gray-500 cursor-pointer hover:text-blue-600 transition" onclick="navigateToLevel(0)">Home</span>
                </li>
            `;

            let currentCategories = categories;
            let currentPathNames = [];

            for (let i = 0; i < currentPath.length; i++) {
                const pathId = currentPath[i];
                const category = currentCategories.find(c => c.id === pathId);
                if (category) {
                    currentPathNames.push(category.name);
                    
                    html += `
                        <li class="flex items-center">
                            <span class="mx-2 text-gray-400">/</span>
                            <span class="font-medium ${i === currentPath.length - 1 ? 'text-blue-600' : 'text-gray-500 cursor-pointer hover:text-blue-600 transition'}" 
                                onclick="navigateToLevel(${i + 1})">
                                ${category.name}
                            </span>
                        </li>
                    `;

                    currentCategories = category.children;
                }
            }
            breadcrumb.innerHTML = html;
        }

        /**
         * Handles the click on a category card.
         * @param {string} id - The ID of the clicked category.
         * @param {boolean} isFinal - True if this is a final option, triggering the modal.
         */
        function handleCategoryClick(id, isFinal) {
            if (isFinal) {
                // Find the name of the final product to display in the modal
                const list = getCurrentCategories();
                const finalProduct = list.find(c => c.id === id);
                if (finalProduct) {
                    document.getElementById('final-selection-name').textContent = finalProduct.name;
                    finalProductId = finalProduct.id;
                }
                openModal();
            } else {
                currentPath.push(id);
                renderCategories(getCurrentCategories());
                // Scroll to the categories section for better UX on mobile
                document.getElementById('categories').scrollIntoView({ behavior: 'smooth' });
            }
        }

        /**
         * Navigates back up the category tree to a specific level.
         * @param {number} level - The target level (0 for home, 1 for level 1, etc.)
         */
        function navigateToLevel(level) {
            currentPath = currentPath.slice(0, level);
            renderCategories(getCurrentCategories());
        }

        // --- Modal Functions ---

        function openModal() {
            const modal = document.getElementById('contact-modal');
            const content = document.getElementById('modal-content');
            modal.classList.remove('hidden');
            // Force reflow to ensure transition works
            void modal.offsetWidth; 
            modal.classList.add('opacity-100');
            content.classList.remove('scale-95', 'opacity-0');
            content.classList.add('scale-100', 'opacity-100');
        }

        function closeModal() {
            const modal = document.getElementById('contact-modal');
            const content = document.getElementById('modal-content');
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            modal.classList.remove('opacity-100');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                // Reset form and message
                document.getElementById('contact-form').reset();
                document.getElementById('submission-message').classList.add('hidden');
                document.getElementById('submit-button').disabled = false;
                document.getElementById('submit-button').textContent = 'Submit Inquiry';
            }, 300); // Match transition duration
        }

        /**
         * Handles the form submission (POST request simulation).
         * @param {Event} event - The form submit event.
         */
        async function handleFormSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const submitButton = document.getElementById('submit-button');
            const messageDiv = document.getElementById('submission-message');

            const formData = {
                product_id: finalProductId,
                product_name: document.getElementById('final-selection-name').textContent,
                name: form.name.value,
                email: form.email.value,
                phone: form.phone.value
            };

            messageDiv.textContent = 'Processing...';
            messageDiv.className = 'mt-4 text-center p-3 rounded-lg text-white font-medium bg-blue-500 block';
            submitButton.disabled = true;
            submitButton.textContent = 'Submitting...';

            console.log('--- Sample POST Request Payload ---');
            console.log(JSON.stringify(formData, null, 2));

            // --- Sample POST Request Code ---
            const SAMPLE_API_ENDPOINT = 'https://jsonplaceholder.typicode.com/posts'; // Using a mock API endpoint
            
            try {
                // Simulate network latency (2 seconds)
                await new Promise(resolve => setTimeout(resolve, 2000)); 

                const response = await fetch(SAMPLE_API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    const result = await response.json();
                    console.log('Sample API Response:', result);

                    messageDiv.textContent = 'Success! Your inquiry has been submitted. A specialist will contact you soon.';
                    messageDiv.className = 'mt-4 text-center p-3 rounded-lg text-white font-medium bg-green-500 block';

                } else {
                    throw new Error('Network response was not ok.');
                }
            } catch (error) {
                console.error('Submission failed:', error);
                messageDiv.textContent = 'Error: Submission failed. Please try again.';
                messageDiv.className = 'mt-4 text-center p-3 rounded-lg text-white font-medium bg-red-500 block';
                submitButton.disabled = false;
                submitButton.textContent = 'Submit Inquiry';
            }
            // --- End Sample POST Request Code ---
        }

        // --- Banner Carousel Logic ---
        let currentBannerIndex = 0;
        const bannerItems = [];

        function initBanner() {
            const container = document.getElementById('banner-container');
            bannerItems.push(...container.querySelectorAll('.banner-item'));

            if (bannerItems.length > 0) {
                showBanner(0);
                setInterval(nextBanner, 5000); // Change banner every 5 seconds
            }
        }

        function showBanner(index) {
            bannerItems.forEach((item, i) => {
                if (i === index) {
                    item.style.opacity = '1';
                    item.style.zIndex = '1';
                } else {
                    item.style.opacity = '0';
                    item.style.zIndex = '0';
                }
            });
            currentBannerIndex = index;
        }

        function nextBanner() {
            const newIndex = (currentBannerIndex + 1) % bannerItems.length;
            showBanner(newIndex);
        }

        // Initialize the app on page load
        window.onload = function() {
            renderCategories(categories);
            initBanner();
        };

    </script>

</body>
</html>

